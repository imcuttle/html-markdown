<!DOCTYPE html>

<html>
<head>
  <title>DOM Utilities</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap for-h1">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h1>DOM Utilities</h1>
<p>This is a collection of common utility methods for the DOM. While similar in nature to libraries like jQuery, this library aims to provide methods for unique and odd features.</p>
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> Node = global.Node;
<span class="hljs-keyword">var</span> Element = global.Element;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2>isNode()</h2>
<p>Determines if a value is a DOM node.</p><h4>Arguments</h4>
<ul>
<li><strong>value</strong> <em>mixed</em> - A value to test as a DOM node.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> isNode =
exports.isNode = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">return</span> node <span class="hljs-keyword">instanceof</span> Node;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <h2>matchesSelector()</h2>
<p>A cross browser compatible solution to testing a DOM element against a CSS selector.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A DOM node to test.</li>
<li><strong>selector</strong> <em>string</em> - A CSS selector.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> matchesSelector = <span class="hljs-keyword">typeof</span> Element !== <span class="hljs-string">"undefined"</span> ?
    Element.prototype.matches ||
    Element.prototype.webkitMatchesSelector ||
    Element.prototype.mozMatchesSelector ||
    Element.prototype.msMatchesSelector :
    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; };

exports.matchesSelector = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node, selector)</span> </span>{
    <span class="hljs-keyword">return</span> matchesSelector.call(node, selector)
}</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2>matches()</h2>
<p>Similar to <code>matchesSelector()</code>, this method will test a DOM node against CSS selectors, other DOM nodes and functions.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A DOM node to test.</li>
<li><strong>selector</strong> <em>string | function | Node | Array</em> - A CSS selector, a function (called with one argument, the node) or a DOM node. Pass an array of selectors to match any of them.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> matches =
exports.matches = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node, selector)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(selector)) <span class="hljs-keyword">return</span> selector.some(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(s)</span> </span>{
        <span class="hljs-keyword">return</span> matches(node, s);
    });

    <span class="hljs-keyword">if</span> (selector <span class="hljs-keyword">instanceof</span> Node) {
        <span class="hljs-keyword">return</span> node === selector;
    }
    
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> selector === <span class="hljs-string">"function"</span>) {
        <span class="hljs-keyword">return</span> !!selector(node);
    }
    
    <span class="hljs-keyword">if</span> (node.nodeType === Node.ELEMENT_NODE) {
        <span class="hljs-keyword">return</span> matchesSelector.call(node, selector);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <h2>closest()</h2>
<p>Stating at <code>elem</code>, this method traverses up the parent nodes and returns the first one that matches <code>selector</code>.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A DOM node to test.</li>
<li><strong>selector</strong> <em>string | function | Node</em> - A CSS selector, a function (called with one argument, the node) or a DOM node.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>exports.closest = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(elem, selector)</span> </span>{
    <span class="hljs-keyword">while</span> (elem != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (elem.nodeType === <span class="hljs-number">1</span> &amp;&amp; matches(elem, selector)) <span class="hljs-keyword">return</span> elem;
        elem = elem.parentNode;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <h2>requestAnimationFrame()</h2>
<p>A cross-browser requestAnimationFrame. Fall back on <code>setTimeout()</code> if requestAnimationFrame isn’t defined.</p><h4>Arguments</h4>
<ul>
<li><strong>fn</strong> <em>function</em> - A funciton to call on the next animation frame.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>exports.requestAnimationFrame =
    <span class="hljs-built_in">window</span>.requestAnimationFrame ||
    <span class="hljs-built_in">window</span>.mozRequestAnimationFrame ||
    <span class="hljs-built_in">window</span>.webkitRequestAnimationFrame ||
    <span class="hljs-built_in">window</span>.oRequestAnimationFrame ||
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(f)</span> </span>{ setTimeout(f, <span class="hljs-number">16</span>); };</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2>getFirstLeafNode()</h2>
<p>Returns the first descendant node without children or <code>null</code> if doesn’t exist.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A DOM node to find the first leaf of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getFirstLeafNode =
exports.getFirstLeafNode = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">while</span> (node.hasChildNodes()) node = node.firstChild;
    <span class="hljs-keyword">return</span> node;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <h2>getLastLeafNode()</h2>
<p>Returns the last descendant node without children or <code>null</code> if doesn’t exist.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A DOM node to find the last leaf of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getLastLeafNode =
exports.getLastLeafNode = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">while</span> (node.hasChildNodes()) node = node.lastChild;
    <span class="hljs-keyword">return</span> node;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <h2>getNextExtendedSibling()</h2>
<p>Returns the next sibling of this node, a direct ancestor node’s next sibling, or <code>null</code>.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A node to get the next extended sibling of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getNextExtendedSibling =
exports.getNextExtendedSibling = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">while</span> (node != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (node.nextSibling != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> node.nextSibling;
        node = node.parentNode;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2>getPreviousExtendedSibling()</h2>
<p>Returns the previous sibling of this node, a direct ancestor node’s previous sibling, or <code>null</code>.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A node to get the previous extended sibling of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getPreviousExtendedSibling =
exports.getPreviousExtendedSibling = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">while</span> (node != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (node.previousSibling != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> node.previousSibling;
        node = node.parentNode;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <h2>getNextNode()</h2>
<p>Gets the next node in the DOM tree. This is either the first child node, the next sibling node, a direct ancestor node’s next sibling, or <code>null</code>.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A node to get the next node of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getNextNode =
exports.getNextNode = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">return</span> node.hasChildNodes() ? node.firstChild : getNextExtendedSibling(node);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2>getPreviousNode()</h2>
<p>Gets the previous node in the DOM tree. This will return the previous extended sibling’s last, deepest leaf node or <code>null</code> if doesn’t exist. This returns the exact opposite result of <code>getNextNode</code> (ie <code>getNextNode(getPreviousNode(node)) === node</code>).</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A node to get the previous node of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getPreviousNode =
exports.getPreviousNode = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">return</span> node.previousSibling == <span class="hljs-literal">null</span> ? node.parentNode : getLastLeafNode(node.previousSibling);
}</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2>getTextContent()</h2>
<p>Gets the text content of a node and its descendants. This is the text content that is visible to a user viewing the HTML from browser. Hidden nodes, such as comments, are not included in the output.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A node to get the text content of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getTextContent =
exports.getTextContent = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Array</span>.isArray(node)) <span class="hljs-keyword">return</span> node.map(getTextContent).join(<span class="hljs-string">""</span>);

    <span class="hljs-keyword">switch</span>(node.nodeType) {
        <span class="hljs-keyword">case</span> Node.DOCUMENT_NODE:
        <span class="hljs-keyword">case</span> Node.DOCUMENT_FRAGMENT_NODE:
            <span class="hljs-keyword">return</span> getTextContent(<span class="hljs-built_in">Array</span>.prototype.slice.call(node.childNodes, <span class="hljs-number">0</span>));

        <span class="hljs-keyword">case</span> Node.ELEMENT_NODE:
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> node.innerText === <span class="hljs-string">"string"</span>) <span class="hljs-keyword">return</span> node.innerText;		<span class="hljs-comment">// webkit</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> node.textContent === <span class="hljs-string">"string"</span>) <span class="hljs-keyword">return</span> node.textContent;	<span class="hljs-comment">// firefox</span>
            <span class="hljs-keyword">return</span> getTextContent(<span class="hljs-built_in">Array</span>.prototype.slice.call(node.childNodes, <span class="hljs-number">0</span>));<span class="hljs-comment">// other</span>
        
        <span class="hljs-keyword">case</span> Node.TEXT_NODE:
            <span class="hljs-keyword">return</span> node.nodeValue || <span class="hljs-string">""</span>;

        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
    }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h2>getRootNode()</h2>
<p>Returns the root node of a DOM tree.</p><h4>Arguments</h4>
<ul>
<li><strong>node</strong> <em>Node</em> - A node in the DOM tree you need the root of.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> getRootNode =
exports.getRootNode = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span> </span>{
    <span class="hljs-keyword">while</span> (node.parentNode != <span class="hljs-literal">null</span>) {
        node = node.parentNode
    }
    
    <span class="hljs-keyword">return</span> node;
}</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap for-h2">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h2>contains()</h2>
<p>Determines if a node is a direct ancestor of another node. This is the same syntax as jQuery’s <code>$.contains()</code>.</p><h4>Arguments</h4>
<ul>
<li><strong>parent</strong> <em>Node</em> - The ancestor node.</li>
<li><strong>node</strong> <em>Node</em> - The node which may or may not be a descendant of the parent.</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> contains =
exports.contains = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(parent, node)</span> </span>{
    <span class="hljs-keyword">while</span> (node != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">if</span> (matches(node, parent)) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        node = node.parentNode;
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
